{% extends 'core/base.html' %}
{% load static %}

{% block title %}T√©moignages Clients ‚Äî SAM EMPIRE{% endblock %}
{% block nav_contact %}active{% endblock %}

{% block content %}
<section class="section-padding page-section" style="min-height:100vh;">
<div class="container">
    <div class="section-header">
        <div class="section-tag">Ils nous font confiance</div>
        <h2 class="section-title">T√©moignages de nos <span class="highlight">Clients</span></h2>
        <p class="section-subtitle">D√©couvrez les retours authentiques de nos clients satisfaits.</p>
    </div>

    {% if temoignages %}
    <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:2rem;">
        {% for t in temoignages %}
        <div class="testimonial-gallery-card" style="background:var(--dark-card);border-radius:16px;border:1px solid var(--dark-border);overflow:hidden;transition:all .4s;">
            <!-- Capture d'√©cran -->
            <div style="width:100%;overflow:hidden;cursor:pointer;" onclick="openLightbox('{{ t.image.url }}')">
                <img src="{{ t.image.url }}" alt="T√©moignage de {{ t.nom_client }}" style="width:100%;height:auto;display:block;transition:transform .4s;">
            </div>
            <!-- Infos -->
            <div style="padding:1.5rem;">
                <div style="display:flex;align-items:center;gap:.8rem;margin-bottom:.8rem;">
                    <div style="width:40px;height:40px;background:rgba(39,174,96,.1);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.1rem;">‚≠ê</div>
                    <div>
                        <h4 style="font-family:var(--font-display);font-size:1rem;font-weight:600;">{{ t.nom_client }}</h4>
                        <span style="font-size:.78rem;color:var(--primary-blue);">{{ t.entreprise|default:"Client" }}</span>
                    </div>
                </div>
                <p style="font-size:.88rem;color:var(--text-light);line-height:1.7;font-style:italic;">"{{ t.texte|truncatewords:30 }}"</p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align:center;padding:4rem 0;">
        <p style="font-size:3rem;margin-bottom:1rem;">üí¨</p>
        <h3 style="font-family:var(--font-display);margin-bottom:.5rem;">T√©moignages √† venir</h3>
        <p style="color:var(--text-muted);">Nos t√©moignages clients seront bient√¥t disponibles ici.</p>
    </div>
    {% endif %}

    <div style="text-align:center;margin-top:3rem;">
        <a href="{% url 'page_contact' %}" class="btn-primary">Nous contacter <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg></a>
    </div>
</div>
</section>

<!-- Lightbox pour agrandir les captures -->
<div id="lightbox" onclick="closeLightbox()" style="display:none;position:fixed;inset:0;z-index:3000;background:rgba(0,0,0,.9);backdrop-filter:blur(10px);align-items:center;justify-content:center;cursor:pointer;">
    <img id="lightboxImg" src="" alt="" style="max-width:90%;max-height:90vh;border-radius:12px;box-shadow:0 20px 60px rgba(0,0,0,.5);">
    <button onclick="closeLightbox()" style="position:absolute;top:2rem;right:2rem;width:44px;height:44px;border-radius:50%;background:rgba(255,255,255,.1);border:1px solid rgba(255,255,255,.2);color:#fff;font-size:1.5rem;cursor:pointer;display:flex;align-items:center;justify-content:center;">&times;</button>
</div>

{% endblock %}

{% block extra_js %}
<script>
function openLightbox(src) {
    document.getElementById('lightboxImg').src = src;
    document.getElementById('lightbox').style.display = 'flex';
    document.body.style.overflow = 'hidden';
}
function closeLightbox() {
    document.getElementById('lightbox').style.display = 'none';
    document.body.style.overflow = '';
}
document.addEventListener('keydown', function(e) { if (e.key === 'Escape') closeLightbox(); });
</script>
{% endblock %}
