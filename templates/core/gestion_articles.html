{% extends 'core/base.html' %}
{% load static %}

{% block title %}Gestion des Articles ‚Äî SAM EMPIRE{% endblock %}
{% block body_class %}page-gestion{% endblock %}

{% block content %}
<!-- Topbar gestion -->
<nav class="navbar scrolled" style="background:rgba(10,10,15,.98)!important;">
<div class="nav-container">
    <a href="{% url 'index' %}" class="nav-logo"><img src="{% static 'images/SAM.png' %}" alt="SAM EMPIRE" style="height:50px;width:auto;"></a>
    <div style="display:flex;align-items:center;gap:1.5rem;">
        <a href="{% url 'gestion_articles' %}" style="color:var(--primary-blue);font-size:.85rem;font-weight:600;">Articles</a>
        <a href="{% url 'gestion_temoignages' %}" style="color:var(--text-light);font-size:.85rem;">T√©moignages</a>
        <span style="color:var(--text-muted);font-size:.85rem;">üëã {{ request.user.username }}</span>
        <a href="{% url 'index' %}" style="color:var(--text-light);font-size:.85rem;">Voir le site</a>
        <a href="{% url 'gestion_logout' %}" class="btn-outline" style="padding:.5rem 1.2rem;font-size:.82rem;">D√©connexion</a>
    </div>
</div>
</nav>

<section style="padding:120px 0 4rem;min-height:100vh;background:var(--dark-bg);">
<div class="container">
    {% if messages %}
    <div style="margin-bottom:2rem;">
        {% for message in messages %}
        <div class="alert alert-{{ message.tags }}" style="position:relative;">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:3rem;flex-wrap:wrap;gap:1rem;">
        <div>
            <h1 style="font-family:var(--font-display);font-size:2rem;font-weight:700;">Gestion des Articles</h1>
            <p style="color:var(--text-muted);font-size:.9rem;margin-top:.3rem;">{{ articles.count }} article{{ articles.count|pluralize }} au total</p>
        </div>
        <a href="{% url 'gestion_article_create' %}" class="btn-primary" style="padding:.8rem 1.8rem;">
            + Nouvel Article
        </a>
    </div>

    {% if articles %}
    <div style="display:flex;flex-direction:column;gap:1rem;">
        {% for article in articles %}
        <div class="contact-form-wrapper" style="padding:1.5rem 2rem;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:1rem;">
            <div style="flex:1;min-width:200px;">
                <div style="display:flex;align-items:center;gap:.8rem;margin-bottom:.3rem;">
                    <span style="font-size:1.2rem;">{{ article.icone }}</span>
                    <h3 style="font-family:var(--font-display);font-size:1.1rem;font-weight:600;">{{ article.titre }}</h3>
                </div>
                <div style="display:flex;align-items:center;gap:1rem;flex-wrap:wrap;">
                    <span style="font-size:.78rem;color:var(--text-muted);">{{ article.date_publication|date:"d/m/Y" }}</span>
                    {% if article.publie %}
                    <span style="font-size:.72rem;padding:.2rem .8rem;background:rgba(75,170,125,.15);color:var(--accent-green);border-radius:50px;font-weight:600;">Publi√©</span>
                    {% else %}
                    <span style="font-size:.72rem;padding:.2rem .8rem;background:rgba(196,75,75,.15);color:var(--accent-red);border-radius:50px;font-weight:600;">Brouillon</span>
                    {% endif %}
                </div>
            </div>
            <div style="display:flex;gap:.8rem;flex-shrink:0;">
                {% if article.publie %}
                <a href="{% url 'article_detail' article.slug %}" target="_blank" class="btn-outline" style="padding:.5rem 1rem;font-size:.8rem;">Voir</a>
                {% endif %}
                <a href="{% url 'gestion_article_edit' article.pk %}" class="btn-outline" style="padding:.5rem 1rem;font-size:.8rem;">Modifier</a>
                <a href="{% url 'gestion_article_delete' article.pk %}" class="btn-outline" style="padding:.5rem 1rem;font-size:.8rem;border-color:rgba(196,75,75,.3);color:var(--accent-red);">Supprimer</a>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align:center;padding:4rem 0;">
        <p style="font-size:3rem;margin-bottom:1rem;">üìù</p>
        <h3 style="font-family:var(--font-display);margin-bottom:.5rem;">Aucun article</h3>
        <p style="color:var(--text-muted);margin-bottom:2rem;">Cr√©ez votre premier article pour qu'il apparaisse sur le site.</p>
        <a href="{% url 'gestion_article_create' %}" class="btn-primary">+ Cr√©er un article</a>
    </div>
    {% endif %}
</div>
</section>
{% endblock %}
